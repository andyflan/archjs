var Arch_App=function(element){this.controllers={};this.element=!element||element==null||typeof element==="undefined"?window:element;this.init=function(){var that=this;console.log("Init app");$(function(){that.initialiseControllers()})};this.registerController=function(controller){this.controllers[this._getIdentifierFromControllerName(controller)]=[];return this};this.Controller=function(controller){var new_object=$.extend({},new Arch_Controller,controller);return function(element,options){new_object.element=element;new_object.options=options;return new_object}};this.makeController=function(type,element,options){var controller;options=typeof options==="undefined"||options===null?{}:options;options=$.extend({},options);controller=new(window[this._getControllerNameFromIdentifier(type)])(element,options);controller.doInit();controller.app=this;this.controllers[type].push(controller);return controller};this.initialiseControllers=function(){var that=this;for(var controller_name in this.controllers){$("[data-component="+controller_name+"]").each(function(index,element){that.makeController(controller_name,element)})}return this};this._getIdentifierFromControllerName=function(controller_name){return controller_name.split("_")[2].toLowerCase()};this._getControllerNameFromIdentifier=function(identifier){return"Arch_Controller_"+identifier.replace(/\w\S*/g,function(txt){return txt.charAt(0).toUpperCase()+txt.substr(1).toLowerCase()})};this.init()};var arch=new Arch_App;var Arch_Controller=function(){this.element=null;this.app=null;this.doInit=function(){if(typeof this.init==="function")this.init();if(typeof this.attachEvents==="function")this.attachEvents();this.map_events()};this.map_events=function(){for(var prop in this){if(prop.indexOf(" ")>=0){var trigger=prop.substring(0,prop.lastIndexOf(" "));var handle=prop.substring(prop.lastIndexOf(" "),prop.length);$(this.element).on(handle,trigger,this[prop])}}}};var Arch_Controller_Reveal=arch.Controller({init:function(){console.log("INIT REVEAL")},attachEvents:function(){console.log("EVENTS REVEAL")},ready:function(){console.log("EVENTS REVEAL")},"a click":function(){console.log("a clicks")},"a.not-normal click":function(){console.log("not normal clicks")}});arch.registerController("Arch_Controller_Reveal");